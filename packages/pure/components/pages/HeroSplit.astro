---
import { Image } from "astro:assets";
import type { ImageMetadata } from "astro";
import { cn } from "astro-pure/utils";

const { imagePaths, altText, class: className } = Astro.props;

const images = import.meta.glob<{ default: ImageMetadata }>(
  "/src/assets/**/*.{jpeg,jpg,png,gif,avif,webp,svg}"
);

if (!imagePaths || imagePaths.length === 0) {
  throw new Error("HeroImage: imagePaths debe tener al menos una imagen");
}

for (const path of imagePaths) {
  if (!images[path]) {
    throw new Error(`HeroImage: "${path}" no existe en /src/assets`);
  }
}
---

<section
  class={cn(
    "w-full flex justify-center items-center overflow-hidden rounded-3xl shadow-xl backdrop-blur-md bg-white/60 dark:bg-zinc-900/40",
    className
  )}
>
  <div class="w-full max-w-6xl p-4 md:p-6">
    <div
      class={cn(
        "grid gap-4",
        imagePaths.length === 1 && "grid-cols-1",
        imagePaths.length === 2 && "grid-cols-2",
        imagePaths.length === 3 && "grid-cols-2 md:grid-cols-3",
        imagePaths.length >= 4 && "grid-cols-2 md:grid-cols-3"
      )}
    >
      {imagePaths.map((path) => (
        <Image
          src={images[path]()}
          alt={altText ?? "imagen"}
          loading="eager"
          class="about-zoom w-full h-[220px] md:h-[260px] object-cover rounded-2xl cursor-zoom-in"
        />
      ))}
    </div>
  </div>
</section>

