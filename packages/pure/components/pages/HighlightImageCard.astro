---
import { Image } from "astro:assets";
import type { ImageMetadata } from "astro";
import HighlightText from "./HighlightText.astro";

interface Props {
  imagePath: string;          // <-- ahora se pasa igual que ProjectCardHorizontal
  highlights: string[];
  color?: string;
}

const { imagePath, highlights, color = "#FF3A83" } = Astro.props;

// Importar imágenes desde /src/assets/*
const images = import.meta.glob<{ default: ImageMetadata }>(
  "/src/assets/**/*.{png,jpg,jpeg,webp,svg,avif,gif}"
);

// Validación
if (!images[imagePath]) {
  throw new Error(`La imagen "${imagePath}" no existe en /src/assets/`);
}
---
<div class="w-full my-4 grid md:grid-cols-[2fr_1fr] gap-6 items-start">

  <!-- TEXTO -->
  <div class="flex flex-col gap-4">
    {highlights.map((text) => (
      <HighlightText text={text} color={color} />
    ))}
  </div>

  <!-- IMAGEN OPTIMIZADA -->
  <div class="flex justify-end">
    <Image
      src={images[imagePath]()}
      alt="highlight-image"
      class="rounded-2xl max-w-[330px] object-contain opacity-95"
      loading="lazy"
    />
  </div>

</div>
